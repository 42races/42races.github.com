<p>Every application can be vulnerable at one point or another, a single breach could take down the entire system. In case of rails application we have seen some really dangerous breaches in the past especially in github. Think of someone taking down github what will happen to our life? The situation can be a digital catastrophe. To avoid such dangers one must be vigilant while coding to avoid at least the known dangers. Here are a few of them to be kept in mind.</p>

<ol>
<li><p>Avoid using your own authentication methods use already existing battle tested libraries like devise or authlogic.
For example</p>
<div class="highlight"><pre><span class="vg">def</span><span class="w"> </span><span class="vg">encrypt</span><span class="p">(</span><span class="vg">password</span><span class="p">)</span>
<span class="w">    </span><span class="vg">salted_password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">SALT</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">password</span>
<span class="w">    </span><span class="vg">self</span><span class="o">.</span><span class="vg">encrypted_password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nl">Digest:</span><span class="o">:</span><span class="vg">SHA1</span><span class="o">.</span><span class="vg">hexdigest</span><span class="p">(</span><span class="vg">salted_password</span><span class="p">)</span>
<span class="vg">end</span>
</pre></div></li>
</ol>

<p>Here the SHA1 algorithm is used to hash the password which is not a good encryption method. SHA1 is a fast algorithm which makes brute force attack easier.</p>

<p>Second thing is salted password here, which is same for all the users can be a great security risk. The salted password is prepended with each user generated password. The salted password must be a random key generated for each user.</p>

<ol>
<li><p>Avoid using servers like webrick which returns the server informations like server version and rails ruby version.
For example WeBrick returns the following information.</p>
<div class="highlight"><pre><span class="vg">HTTP</span><span class="o">/</span><span class="mf">1.1</span><span class="w"> </span><span class="il">200</span><span class="w"> </span><span class="vg">OKS</span>
<span class="nl">Server:</span><span class="w"> </span><span class="vg">WEBrick</span><span class="o">/</span><span class="mf">1.3.1</span><span class="w"> </span><span class="p">(</span><span class="vg">Ruby</span><span class="o">/</span><span class="mf">1.9.3</span><span class="o">/</span><span class="il">2012-04-20</span><span class="p">)</span>
</pre></div></li>
<li><p>YAML related issues.</p>
<div class="highlight"><pre><span class="vg">class</span><span class="w"> </span><span class="vg">Post</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nl">ActiveRecord:</span><span class="o">:</span><span class="vg">Base</span>
<span class="w">    </span><span class="vg">serialize</span><span class="w"> </span><span class="o">:</span><span class="vg">tags</span>
<span class="vg">end</span>
</pre></div></li>
</ol>

<p>If you have stored some user supplied data in the tags which when loaded later may result in executing the stored data. This may be a piece of code supplied by the user, a Remote Code Execution happens here, If the user provides some malicious code this could risk be a great security risk.</p>

<p>A better approach is to use JSON for serialization of user supplied data, because when the data is deserialized it won&#39;t produce executable code.</p>
<div class="highlight"><pre><span class="w">    </span><span class="vg">class</span><span class="w"> </span><span class="vg">Post</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nl">ActiveRecord:</span><span class="o">:</span><span class="vg">Base</span>
<span class="w">        </span><span class="vg">serialize</span><span class="w"> </span><span class="o">:</span><span class="vg">tags</span><span class="p">,</span><span class="w"> </span><span class="vg">JOSN</span>
<span class="w">    </span><span class="vg">end</span>
</pre></div>